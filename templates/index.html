{% extends 'base.html' %}

{% block head %}
<title>Get Song</title>
{% endblock %}

{% block body %}
<div class="container">
    <header class="header">
        <div class="logo">Spotify Controller</div>
        <div class="nav-buttons">
            {% if logged_in %}
                <span class="auth-status logged-in">Logged In</span>
                <a href="{{ url_for('logout') }}" class="btn btn-secondary">Logout</a>
            {% else %}
                <span class="auth-status logged-out">Logged Out</span>
                <a href="{{ url_for('login') }}" class="btn btn-primary">Login with Spotify</a>
            {% endif %}
        </div>
    </header>

    {% if logged_in %}
        <div class="control-section">
            <form method="POST" class="search-form">
                <div class="search-container">
                    <input type="text"
                           name="song_name"
                           class="search-input"
                           placeholder="Busca una cancion..."
                           required>
                    <button type="submit" class="btn btn-primary">Reproduce la cancion</button>
                </div>
            </form>

            <div class="voice-control-section">
                <button id="voice-control-toggle" class="btn btn-success">
                    üéôÔ∏è Activa el control de voz
                </button>
                <div id="voice-instructions" class="voice-instructions" style="display: none;">
                    <p>Control de voz activo, prueba estos comandos:</p>
                    <ul>
                        <li>"Pausa" o "Detener" (Pause)</li>
                        <li>"Reproducir" o "Continuar" (Play)</li>
                        <li>"Siguiente" o "Saltar" (Next Track)</li>
                        <li>"Anterior" o "Atr√°s" (Previous Track)</li>
                        <li>"Subir Volumen" (Volume Up)</li>
                        <li>"Bajar Volumen" (Volume Down)</li>
                    </ul>
                </div>
            </div>
        </div>

        {% if message %}
            <div class="message {% if 'error' in message.lower() %}error{% else %}success{% endif %}">
                {{ message }}
            </div>
        {% endif %}

        <div id="message" class="message" style="display: none;"></div>

        {% if track_info %}
            <div class="track-info">
                {% if track_info.error %}
                    <div class="error">{{ track_info.error }}</div>
                {% else %}
                    <h3>Added to Queue:</h3>
                    <div class="track-details">
                        <div>Song: {{ track_info.name }}</div>
                        <div>Artist: {{ track_info.artist }}</div>
                        <div>Album: {{ track_info.album }}</div>
                    </div>
                {% endif %}
            </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}